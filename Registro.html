<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Olimpiada Sonorense de Informática</title>
        <link rel="icon" type="image/x-icon" href="assets/img/logoOsi.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.15.1/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <style>
            * {box-sizing: border-box}
            body {font-family: Verdana, sans-serif; margin:0}
            .mySlides {display: block}
            img {
                vertical-align: middle;
                max-height: 500px;
            }
            
            /* Slideshow container */
            .slideshow-container {
              max-width: 1000px;
              position: relative;
              margin: auto;
            }
            
            /* Next & previous buttons */
            .prev, .next {
              cursor: pointer;
              position: absolute;
              top: 50%;
              width: auto;
              padding: 16px;
              margin-top: -22px;
              color: black;
              font-weight: bold;
              font-size: 18px;
              transition: 0.6s ease;
              border-radius: 0 3px 3px 0;
              user-select: none;
            }
            
            /* Position the "next button" to the right */
            .next {
              right: 0;
              border-radius: 3px 0 0 3px;
            }
            
            /* On hover, add a black background color with a little bit see-through */
            .prev:hover, .next:hover {
              background-color: rgba(0,0,0,0.8);
            }
            
            /* Caption text */
            .text {
              color: #f2f2f2;
              font-size: 15px;
              padding: 8px 12px;
              position: absolute;
              bottom: 8px;
              width: 100%;
              text-align: center;
            }
            
            /* Number text (1/3 etc) */
            .numbertext {
              color: #f2f2f2;
              font-size: 12px;
              padding: 8px 12px;
              position: absolute;
              top: 0;
            }
            
            /* The dots/bullets/indicators */
            .dot {
              cursor: pointer;
              height: 10px;
              width: 10px;
              margin: 0 2px;
              background-color: #bbb;
              border-radius: 50%;
              display: inline-block;
              transition: background-color 0.6s ease;
            }
            
            .active1, .dot:hover {
              background-color: #717171;
            }
            
            /* Fading animation */
            .fade1 {
              -webkit-animation-name: fade1;
              -webkit-animation-duration: 1.5s;
              animation-name: fade1;
              animation-duration: 1.5s;
            }
            
            @-webkit-keyframes fade1 {
              from {opacity: .4} 
              to {opacity: 1}
            }
            
            @keyframes fade1 {
              from {opacity: .4} 
              to {opacity: 1}
            }
            
            /* On smaller screens, decrease text size */
            @media only screen and (max-width: 300px) {
              .prev, .next,.text {font-size: 11px}
            }

            /* Estilos para el contenedor del iframe */
            .iframe-container {
                position: relative;
                width: 100%;
                max-width: 800px;
                margin: 0 auto;
                padding: 20px;
                min-height: 500px;
            }

            .google-form-iframe {
                width: 100%;
                border: none;
                min-height: 500px;
                display: block;
                background-color: #f8f9fa;
            }

            .iframe-loading {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                z-index: 10;
            }

            .iframe-loading.hidden {
                display: none;
            }

            .iframe-error {
                display: none;
                text-align: center;
                padding: 40px 20px;
                background-color: #f8f9fa;
                border-radius: 5px;
                margin: 20px 0;
            }

            .iframe-error.show {
                display: block;
            }

            .iframe-error .btn {
                margin-top: 15px;
            }

            /* Responsive para móviles */
            @media (max-width: 768px) {
                .iframe-container {
                    padding: 10px;
                }
                
                .google-form-iframe {
                    min-height: 400px;
                }
            }

            @media (max-width: 480px) {
                .iframe-container {
                    padding: 5px;
                }
            }
        </style>
    </head>
    <body>
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
            <div class="container">
                <a class="navbar-brand js-scroll-trigger" href="index.html">OSI</a>
                <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars ml-1"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav text-uppercase ml-auto">
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="index.html">Página principal</a></li><!--Esta en revision el boton para regresar-->
                       <!-- <li class="nav-item"><a class="nav-link btn btn-success" id="btnConvocatoria" style="color: white;">Convocatoria</a></li>-->
                    </ul>
                </div>
            </div>
        </nav>

        <!--Results section-->
        <section class="page-section">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">Registro</h2>
                    <h3 class="section-subheading text-muted">Regístrate y responde el examen de lógica aquí mismo.</h3>
                </div>
                <div class="card mb-3">
                    <div class="card-body">
                        <h5 class="card-title text-center">Olimpiada Sonorense de Informática 2026</h5>
                    </div>
                    <div class="iframe-container">
                        <!-- Indicador de carga -->
                        <div class="iframe-loading" id="iframe-loading">
                            <div class="spinner-border text-primary" role="status">
                                <span class="sr-only">Cargando formulario...</span>
                            </div>
                            <p class="mt-3 text-muted">Cargando formulario...</p>
                        </div>
                        
                        <!-- Mensaje de error (oculto por defecto) -->
                        <div class="iframe-error" id="iframe-error">
                            <i class="fas fa-exclamation-triangle fa-3x text-warning mb-3"></i>
                            <h5>No se pudo cargar el formulario</h5>
                            <p class="text-muted">Por favor, intenta nuevamente o accede directamente al formulario.</p>
                            <a href="https://forms.gle/xKJYqvfMGTbzpZLL9" target="_blank" class="btn btn-primary">
                                <i class="fas fa-external-link-alt mr-2"></i>Abrir formulario en nueva pestaña
                            </a>
                        </div>
                        
                        <!-- Iframe del formulario de Google -->
                        <iframe 
                            id="google-form-iframe"
                            class="google-form-iframe"
                            src="https://forms.gle/xKJYqvfMGTbzpZLL9"
                            title="Formulario de Registro - Olimpiada Sonorense de Informática 2026"
                            allowfullscreen
                            aria-label="Formulario de registro para la Olimpiada Sonorense de Informática 2026">
                            Tu navegador no soporta iframes. Por favor, 
                            <a href="https://forms.gle/xKJYqvfMGTbzpZLL9" target="_blank">abre el formulario en una nueva pestaña</a>.
                        </iframe>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer-->
        <footer class="footer py-4">
          <div class="container">
              <div class="row align-items-center">
                  <div class="col-lg-4 text-lg-left">Copyright © Olimpiada Sonorense de Informática 2021</div>
                  <div class="col-lg-4 my-3 my-lg-0">
                      <!--<a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-twitter"></i></a>-->
                      <a class="btn btn-dark btn-social mx-2" href="https://web.facebook.com/ComiteOSI/" target="_blank"><i class="fab fa-facebook-f"></i></a>
                      <!--<a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-linkedin-in"></i></a>-->
                  </div>
                  <div class="col-lg-4 text-lg-right">
                      <a class="mr-3" hidden href="#!">Política de privacidad</a>
                      <a href="#!" hidden>Términos de uso</a>
                  </div>
              </div>
          </div>
      </footer>

      <!-- Bootstrap core JS-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
      <!-- Third party plugin JS-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
      <!-- Core theme JS-->
      <script src="js/scripts.js"></script>
      <script>
          $(document).ready(function() {
              var iframe = document.getElementById('google-form-iframe');
              var loadingIndicator = document.getElementById('iframe-loading');
              var errorMessage = document.getElementById('iframe-error');
              var loadTimeout;
              
              // Función para ocultar el indicador de carga
              function hideLoading() {
                  if (loadingIndicator) {
                      loadingIndicator.classList.add('hidden');
                  }
              }
              
              // Función para mostrar el error
              function showError() {
                  hideLoading();
                  if (errorMessage) {
                      errorMessage.classList.add('show');
                  }
                  if (iframe) {
                      iframe.style.display = 'none';
                  }
              }
              
              // Detectar cuando el iframe carga exitosamente
              if (iframe) {
                  iframe.addEventListener('load', function() {
                      clearTimeout(loadTimeout);
                      hideLoading();
                      if (errorMessage) {
                          errorMessage.classList.remove('show');
                      }
                      if (iframe) {
                          iframe.style.display = 'block';
                      }
                  });
                  
                  // Manejo de errores de carga
                  iframe.addEventListener('error', function() {
                      showError();
                  });
                  
                  // Timeout: si el iframe no carga en 15 segundos, verificar estado
                  loadTimeout = setTimeout(function() {
                      // Verificar si el iframe realmente cargó
                      try {
                          // Intentar acceder al contenido del iframe
                          // Si falla por CORS, es normal y significa que el iframe cargó
                          if (iframe.contentWindow === null) {
                              showError();
                          } else {
                              // Si hay contentWindow, asumir que cargó (CORS puede prevenir acceso al document)
                              hideLoading();
                          }
                      } catch (e) {
                          // Error de CORS es normal y significa que el iframe cargó correctamente
                          // Solo mostrar error si es un error diferente
                          if (e.name !== 'SecurityError' && e.name !== 'DOMException') {
                              showError();
                          } else {
                              hideLoading();
                          }
                      }
                  }, 15000);
              }
              
              // Fallback: si después de 20 segundos aún está cargando, mostrar error
              setTimeout(function() {
                  if (loadingIndicator && !loadingIndicator.classList.contains('hidden')) {
                      showError();
                  }
              }, 20000);
          });
      </script>
    </body>
</html>